<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="_css/lotsawa.css" title="description_of_style">

    <style></style>

    <script type="text/javascript">
        var jsobj = {}
        var Rus_Tr_Txt = '';
        var wrd_id = '';
        var sent_id = '';
        var user='';
    </script>

    <script src="/_js/dict_esp.js?12123" type="text/javascript"></script>
    <script src="/_js/utils.js" type="text/javascript"></script>
    <script src="/_js/mousetrap.min.js" type="text/javascript"></script>
    <link rel="shortcut icon" href="data:,">
    <!--<script src="/_js/lotsawa.js" type="text/javascript"></script>
-->
<script id='parse page url'>
    function page_url() {
        let url=window.location.href;
        if (url.includes('ocrData')) {
            let ocrData = url.split('ocrData=')[1].split('&')[0];
            let index = url.split('index=')[1].split('&')[0];
            let field= parseInt(url.split('field=')[1], 10)
            
            if (field !=0){
                p_pre=`/?ocrData=${ocrData}&index=${index}&field=${field - 1}`
                pg_pre.setAttribute('href', p_pre)}
            else {pg_pre.setAttribute('href', '/')}
            let p_nxt = `/?ocrData=${ocrData}&index=${index}&field=${field + 1}`
            pg_nxt.setAttribute('href', p_nxt)
        }
    }

</script>

    <script id='Upd_Header_Def_SentTr'>
        function Upd_Header_Def_SentTr(opt) {
            //–¥–æ–±–∞–≤–∏–ª–∏ –≤ –®–∞–ø–∫—É –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('user_word').innerHTML = opt;

            //take key_word
            //var key = document.getElementById('key').innerText;

            // find Result.element(key) & set new def
            //let tag = document.getElementById(wrd_id);

            document.getElementById(wrd_id).setAttribute("def", opt);
            //alert(document.getElementById(wrd_id));
            // Update Sentence Translation
            //let Sent_prt_speach='';
            //let Sent_Html = '';
            let Sent_Tr_txt = '';
            sent_id = document.getElementById(wrd_id).parentNode.id

            var child = document.getElementById(sent_id).children;
            for (var i = child.length - 1; i >= 0; i--) {
                //Sent_prt_speach = Sent_prt_speach + '‚áé<kbd class="draggable">' + child[i].className + '</kbd>';
                //Sent_Html = Sent_Html + '‚áé<kbd class="draggable">' + child[i].getAttribute("def") + '</kbd>';
                Sent_Tr_txt = child[i].getAttribute("def") + ' ' + Sent_Tr_txt;
            };
            //document.getElementById('Sent_RusTr').innerHTML = Sent_Html;
            //document.getElementById('Sent_RusTr').innerHTML = Sent_prt_speach;
            document.getElementById('Sent_box').value = Sent_Tr_txt;
        }
    </script>

    <script id='Send2DB_Pair2JSOBJ_Pair2NewWord'>
        function new_pair(key, new_Word, rw) {
            // rw=0 - addWord - –î–û–ë–ê–í–ò–¢–¨ –ó–ù–ê–ß–ï–ù–ò–ï –∫ –ö–õ–Æ–ß–£
            // rw=1 - putWord - –ü–ï–†–ï–ó–ê–ü–ò–°–¨ –ö–õ–Æ–ß-–ó–ù–ê–ß–ï–ù–ò–ï
            //var dataBase = 'dLotsawa'  //(—Å–ª–æ–≤–∞—Ä—å –ø–∞–º—è—Ç–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤)
            sendHTTP('application/json', '/create/post.esp',
                '{"key":"' + key + '", "value":"' + new_Word + '", "rw":"' + rw + '", "ocrData":"prs2txt"}',// "db":"' + dataBase + '"}',
                function (text) {
                    console.log("done add: " + key + "=" + new_Word)
                }
            );

            // –î–æ–±–∞–≤–∏—Ç—å –ü–∞—Ä—É –≤ –ò–Ω–¥–µ–∫—Å –î–ë
            //Add_IndexedDb(key, new_Word, 'New_Pair');

            // –ï—Å–ª–∏ —ç—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ó–ù–ê–ß–ï–ù–ò–Ø –∫ —Ç–∏–± —Å–ª–æ–≤—É –∏–∑ —Å–ø–∏—Å–∫–∞, —Ç–æ –Ω—É–∂–Ω–æ –Ω–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –≤ –∫–æ–Ω–µ—Ü,
            // –∞ –ø—Ä–∏—Ü–µ–ø–∏—Ç—å —Å–ø–µ—Ä–µ–¥–∏ –Ω–æ–≤–æ–µ –ó–ù–ê–ß–ï–ù–ò–ï –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–± —Å–ª–æ–≤–∞.

            // –î–æ–±–∞–≤–∏—Ç—å –ü–∞—Ä—É –≤ jsobj
            if (key in jsobj && rw!=true) {
                jsobj[key].unshift(new_Word);
            } else {
                //jsobj[key].concat(new_Word)
                jsobj[key] = [new_Word];
            }
            // Export new words
            //console.log(JSON.stringify(jsobj))

            // –î–æ–±–∞–≤–∏—Ç—å –ü–∞—Ä—É –≤ 'New_Wrds'
            let html = '';
            for (let i = 0; i < Object.keys(jsobj).length; i++) {
                html = Object.keys(jsobj)[i] + '=' + Object.values(jsobj)[i] + ' \n' + html
            }
            document.getElementById('New_Wrds').innerHTML = html;

            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –õ–æ–∫–∞–ª –°—Ç–æ—Ä–∞–¥–∂
			/* localStorage.setItem(key, [new_Word]);
				let new_pair = key + '= xxx; ' + new_Word;
			*/
        }
    </script>

    <title>Lotsawa</title>
</head>

<body onload = "page_url()">
    <!--WORD Modal Vindow
	<div id="WordModal" class="fon_okna">-->

    <div id="ModalWindw" class="okno" style="opacity: 0; pointer-events: none;">
        <div class="modal-header">
            <h3 class="modal-title" id="key">‡Ω¶‡æ§‡æ±‡Ωº‡Ωë</h3>
            <a href="#cansl" id="clos" title="Close" class="picto">üôè</a>
        </div>
        <script id="close Word Window">
            clos.onclick = function close() {
                document.querySelector('#ModalWindw').style = "opacity: 0; pointer-events: none;";
            };
        </script>
        <div class="user_transl" id="user_word">
            <div class="vote_line" style="width: 13.2771%;"></div>
        </div>

        <div class="transl-lst" id="trnsl_opt">
            <div class="option">
                <div class="vote_line" style="width: 10%">–ø—Ä–∞–∫—Ç–∏–∫–∞</div>
            </div>

            <div class="option">
                <div class="vote_line" style="width: 17.0179%;">–ø–æ–≤–µ–¥–µ–Ω–∏–µ</div>
            </div>
        </div>

        <div class="footer_expanded-form">
            <form action="." name="Input_new_word" method="post">
                <input name="new_Word" id='nw_opt' title='–í–≤–µ—Å—Ç–∏ –Ω–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥ –∏ –ø–æ–≤–µ—Ä–Ω—É—Ç—å –∫–æ–ª–µ—Å–æ –î—Ö–∞—Ä–º—ã' type="text"
                    autocomplete="off" class="mousetrap" value="">
                <a href="#" id="add_word" title='–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥ –∏ –µ–≥–æ —Ç–∏–±–µ—Ç—Å–∫—É—é –ø–∞—Ä—É –≤: 
				+ —Å–ø–∏—Å–æ–∫ –ù–æ–≤—ã–µ –ü–∞—Ä—ã (–≤ –ø—Ä–∞–≤–æ–º –æ–∫–Ω–µ), + (IndexedDB), + 00_NW.txt 
				(!!–í–ê–ñ–ù–û —Å–ø–∏—Å–æ–∫ –æ—á–∏—â–∞–µ—Ç—Å—è –ø–æ –∑–∞–∫—Ä—ã—Ç–∏—é/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –æ–∫–Ω–∞!!).' class="picto">‚ò∏Ô∏è</a>
                <!--<input type="submit" title="Add new word to Dict" value="‚úî" class="picto" 
						onclick="add_userWord()">
                    class="input_new_val"-->
            </form>
        </div>

        <script id="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Å–ª–æ–≤–∞ –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–ª–æ–≤–∞">
            add_word.onclick = function add_word() {
                var new_Word = document.Input_new_word.new_Word.value;

                Upd_Header_Def_SentTr(new_Word);

                // Add_New_Word in Dict
                //take key_word
                var key = document.getElementById('key').innerText;
                var elem = document.getElementById('h_' + key);

                //node.prepend(...nodes or strings) ‚Äì –≤—Å—Ç–∞–≤–ª—è–µ—Ç –≤ node –≤ –Ω–∞—á–∞–ª–æ,
                //node.before(...nodes or strings) ‚Äì- –≤—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ node,
                //node.after(...nodes or strings) ‚Äì- –≤—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ node,

                //for (let rus of new_Word) {
                var newDiv = document.createElement('div');
                newDiv.className = "usr_wrd";
                newDiv.id = '';
                newDiv.innerHTML = key + ' : ' + new_Word + '<div class="vote_line" style = "width: 57%;"></div >';
                elem.prepend(newDiv);
                //}

                new_pair(key, new_Word, rw_bo_ru.checked);

                document.getElementById('nw_opt').value = ""
            }
        </script>

        <script id="–ò–∑–º–µ–Ω–µ–Ω–∏–µ –î–§–ù –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Å–µ–ª–µ–∫—Ç—É">
            //!!!!!   MAIN   !!!!!
            trnsl_opt.onclick = function Change_Dfn(event) {
                //take option value
                let id = event.target.id;

                let opt = document.getElementById(id).innerText;
                
                    // expected output: ReferenceError: nonExistentFunction is not defined
                    // Note - error messages will vary depending on browser
                
                try{
                    Upd_Header_Def_SentTr(opt);
                }catch (TypeError) {
                                    console.error('–í –ü—É—Å—Ç–æ—Ç–µ, –Ω–∞ —á—Ç–æ –æ–ø–µ—Ä–µ—Ç—å—Å—è?! –ñ–º–∏ –Ω–∞ –≤–∞—Ä–∏–∞–Ω—Ç –ø–µ—Ä–µ–≤–æ–¥–∞');
                                    // expected output: ReferenceError: nonExistentFunction is not defined
                                    // Note - error messages will vary depending on browser
                                }
            }
        </script>
    </div>


    <article class="Tib_Txt">
        <h7 id="_@"></h7>
        <section lang="bo" id="Result">
            %Report_1()
        </section>
        <br>
    </article>

    <aside class="Right_Dict">

        <!--Form
	<a href="/login">Enter Tib Txt</a>-->

        <!--<p style='font-weight: 600'> Upload Tibetan Txt File </p>  
	<form name="Input_Tb_Str" method="post" action="." style="position: relative;right: 0;top: 0;">
		<input name="Tib_Strn" title="–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ç–∏–±–µ—Ç—Å–∫–∏–π —Ç–µ–∫—Å—Ç –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ 
				–ø–æ–≤–µ—Ä–Ω–∏—Ç–µ –∫–æ–ª–µ—Å–æ –î—Ö–∞—Ä–º—ã." class="input_new_val" size='18'>
		<input type="submit" class="btn" title="–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—ã–π –¢–∏–±–µ—Ç—Å–∫–∏–π –¢–µ–∫—Å—Ç" value="‚ò∏"
			onclick="FN_Tb_Str()">-->
        <!--<a href="#" id="Format_TibTxt" title='–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª —Å —Ç–∏–±–µ—Ç—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. 
				–ü–æ–≤–µ—Ä–Ω–∏—Ç–µ –∫–æ–ª–µ—Å–æ –î—Ö–∞—Ä–º—ã.' class="picto">Upload TibTxtFile ‚ò∏</a>
		
		<span class="crds"></span>
		<hr>
	</form>-->

        <input type="checkbox" id="side-checkbox" />
        <div class="side-panel">
            <label class="side-button" for="side-checkbox">üôè</label>
            <h4 class="side-title">–ù–æ–≤—ã–µ –ü–∞—Ä—ã –¥–æ–±–∞–≤–∏—Ç—å | 
           <label for='rw_bo_ru'>–∑–∞–º–µ–Ω–∞ 
            <input type="checkbox" id="rw_bo_ru" style='position: inherit;' \
                title="–ó–ê–ú–ï–ù–ò–¢–¨ –Ω–æ–≤—ã–º [—Ç–∏–±–µ—Ç—Å–∫–æ–µ —Å–ª–æ–≤–æ-—Å–æ—á–µ—Ç–∞–Ω–∏–µ=–ø–µ—Ä–µ–≤–æ–¥]" value="rw"></label>
                
</h4> <hr>
            <input name="Tib_Rus" id="nw-pair" title="–í–≤–µ—Å—Ç–∏ –Ω–æ–≤—É—é –ø–∞—Ä—É [—Ç–∏–±–µ—Ç—Å–∫–æ–µ —Å–ª–æ–≤–æ-—Å–æ—á–µ—Ç–∞–Ω–∏–µ=–ø–µ—Ä–µ–≤–æ–¥] –∏
					 –ø–æ–≤–µ—Ä–Ω—É—Ç—å –∫–æ–ª–µ—Å–æ –î—Ö–∞—Ä–º—ã" style='width: 84.5%;' class="input_new_val" size="18">
            <a href="#" id="Add_Tib_Rus" title="–î–æ–±–∞–≤–∏—Ç—å [—Ç–∏–±–µ—Ç—Å–∫–æ–µ —Å–ª–æ–≤–æ-—Å–æ—á–µ—Ç–∞–Ω–∏–µ=–ø–µ—Ä–µ–≤–æ–¥] –≤: 
				+ —Å–ø–∏—Å–æ–∫ –ù–æ–≤—ã–µ –ü–∞—Ä—ã (–≤ –ø—Ä–∞–≤–æ–º –æ–∫–Ω–µ), + (IndexedDB), + 00_NW.txt 
					(!!–í–ê–ñ–ù–û —Å–ø–∏—Å–æ–∫ –æ—á–∏—â–∞–µ—Ç—Å—è –ø–æ –∑–∞–∫—Ä—ã—Ç–∏—é/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –æ–∫–Ω–∞!!). ‚ò∏" class="picto">‚ò∏Ô∏è</a>
            <hr>
            <div id='resp' style="overflow: overlay; word-wrap: break-word;"></div>
            <textarea id="New_Wrds" title='–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –ø–∞—Ä—ã.–∑–Ω–∞—á–µ–Ω–∏—è, 
						–∑–¥–µ—Å—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è –ø–∞—Ä–∞, –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å.' class="pair_lst" value=""></textarea>

        </div>

        <!--<label class="side-button" for="side-checkbox">
			<div class="side-b side-open" title="–ü–∞–Ω–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–∞—Ä [—Ç–∏–±–µ—Ç—Å–∫–æ–µ —Å–ª–æ–≤–æ-—Å–æ—á–µ—Ç–∞–Ω–∏–µ=–ø–µ—Ä–µ–≤–æ–¥].">
				<kbd>WRD</kbd></div>
		</label>-->

        <!--<script  action=".">
			input.addEventListener("keyup", function (event) {
				alert('adasd')
				if (event.keyCode === 13) {
					event.preventDefault();
					document.New_Tib_Rus.getElementById("Add_Tib_Rus").click();
				}
			});
		</script>-->

        <script id="–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –ø–∞—Ä—É" type="text/javascript">
            Add_Tib_Rus.onclick = function Add_Tib_Rus() {

                var Tib_Rus = document.getElementById('nw-pair').value;
                if (Tib_Rus.includes('=')) {
                    Tib_Rus = Tib_Rus.split('=')
                    let key = Tib_Rus[0];
                    let new_Word = Tib_Rus[1];

                    new_pair(key, new_Word, rw_bo_ru.checked);

                } else {
                    let key = Tib_Rus;

                    //–ó–ê–ü–†–û–° –ø–æ –ö–õ–Æ–ß —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π API
                    //var dataBase = 'dLotsawa'  //(—Å–ª–æ–≤–∞—Ä—å Lotsawa)
                    sendHTTP('application/json', '/create/post.esp',
                        '{"key":"' + key + '", "ocrData":"getWord"}',//, "db":"' + dataBase + '"}',
                        function (text) {
                            document.getElementById('resp').innerHTML = text;
                        }
                    );
                }
                document.getElementById('nw-pair').value = ""
            }
        </script>

        <h4 style="margin-top: 8px;">–ü–µ—Ä–µ–≤–æ–¥ –¢–µ–∫—Å—Ç–∞:</h4>
        <hr>
            <textarea id="Tib_Str2Rus" style='width: 88%;height: auto;margin: 1px;background: beige;' title='–í–≤–µ–¥–∏—Ç–µ —Ç–∏–±–µ—Ç—Å–∫–∏–π —Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞' class="input_sent" value=""></textarea>
            <a href="#" id="Run_Tib_Str2Rus" style= 'position: inherit; top: 46px;' title="–ü–µ—Ä–µ–≤–æ–¥ –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ —Ç–∏–±–µ—Ç—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞" class="picto">‚ò∏Ô∏è</a>
            <hr>
            <textarea id="Rus_Txt" style='height: 40%; margin: 1px;' title='–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ (–≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Å–ª–æ–≤–∞) –≤—Å–µ—Ö (—Ö–æ—Ç—è-–±—ã –æ–¥–Ω–æ–≥–æ) –∑–Ω–∞—á–µ–Ω–∏–π —Å–ª–æ–≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, 
				–∑–¥–µ—Å—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å. 
				–ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —Ä–µ–¥–∞–∫—Ç—É—Ä—ã –ø–æ–≤–µ—Ä–Ω—É—Ç—å –∫–æ–ª–µ—Å–æ –î—Ö–∞—Ä–º—ã.' class="input_sent" value=""></textarea>

        <details style='display:none'>
            <hr style='margin-top: 7%;'>
            <summary>–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏—è:</summary>
            <section id="Slovar" class="Dict">
                %Report_2()
            </section>
        </details>

        <script id="–ü–µ—Ä–µ–≤–æ–¥ –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ —Ç–∏–±–µ—Ç—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞" type="text/javascript">
            Run_Tib_Str2Rus.onclick = function Tib_Str2Rus() {
                var usrTb = document.getElementById('Tib_Str2Rus').value
                //alert(usrTb)
                //target="_blank" 
                // /?ocrData=usrBo
                // /?index=0&field=0&ocrData=TibetanUTFToRus
                
                //–ó–ê–ü–†–û–° –ø–æ —Ñ—Ä–∞–∑–µ —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π API
                //var dataBase = 'dLotsawa'  //(—Å–ª–æ–≤–∞—Ä—å Lotsawa)
                sendHTTP('application/json', '/create/post.esp',
                    '{"usrTb":"' + usrTb + '"}', //, "ocrData":"usrBo"}',
                    function (text) {
                        //document.getElementById('Result').innerHTML = text;
                        location.href = '/?index=usrBo&field=0&ocrData=TibetanUTFToRus'
                    }
                );

                //    function (text) {
                        //location.href='/#' 
                        //let el = document.createElement('html');
                        //el.innerHTML= text
                        //document.getElementById('Result').innerHTML = new DOMParser().parseFromString(text,'text/html');
                //    }
                //);
                document.getElementById('Tib_Str2Rus').value = ""
            } 
        </script>

        <script id="–ó–∞–ø–æ–ª–Ω–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ + –íe—Ä–Ω—É—Ç—å –ò–î –í—ã–±–æ—Ä–∞+koord">
            Result.onclick = function modalWindowFill(event) {
                try {
                    //calculate click ID
                    wrd_id = event.target.id; // –ü–æ–ª—É—á–∏–ª–∏ ID, —Ç.–∫. –≤ e.target —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –∫–ª–∏–∫–Ω—É–ª–∏
                    //alert(wrd_id)
                    // The substituted value will be contained in the result variable
                    let idx = wrd_id.replace(/\d+_(.+)/gm, '$1');
                    var key = idx; //document.getElementById(wrd_id).innerText;
                    //alert(idx)
                    idx = "h_" + idx;

                    //take value from Dict
                    var trnsl_opt = document.getElementById(idx).innerHTML;

                    //clear modal window
                    //document.getElementById("key").innerHTML = "";
                    //document.getElementById("trnsl_opt").value = "";
                    document.getElementById("user_word").innerHTML = "";

                    //alert(key)
                    //Put to Modal
                    document.getElementById('key').innerText = key;
                    document.getElementById('trnsl_opt').innerHTML = trnsl_opt;

                    // –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞
                    let ResultCoords = this.getBoundingClientRect();

                    // –º—è—á –∏–º–µ–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (position:absolute), –ø–æ–ª–µ - –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ (position:relative)
                    // —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º—è—á–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ, –≤–µ—Ä—Ö–Ω–µ–≥–æ –ª–µ–≤–æ–≥–æ —É–≥–ª–∞ –ø–æ–ª—è
                    let oknoCoords = {
                        top: event.clientY + 25, //- ResultCoords.top - Result.clientTop + 35,
                        left: event.clientX - 115,//- ResultCoords.left - Result.clientLeft - 115
                    };

                    // –∑–∞–ø—Ä–µ—â–∞–µ–º –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å –≤–µ—Ä—Ö–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É –ø–æ–ª—è
                    //if (oknoCoords.top < 0) oknoCoords.top = 0;

                    //–∑–∞–ø—Ä–µ—â–∞–µ–º –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å –ª–µ–≤—É—é –≥—Ä–∞–Ω–∏—Ü—É –ø–æ–ª—è
                    if (oknoCoords.left < 0) oknoCoords.left = 0;

                    // // –∑–∞–ø—Ä–µ—â–∞–µ–º –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å –ø—Ä–∞–≤—É—é –≥—Ä–∞–Ω–∏—Ü—É –ø–æ–ª—è
                    if (oknoCoords.left + 230 > Result.clientWidth) {
                        oknoCoords.left = Result.clientWidth - 230;
                    }
                    //alert(oknoCoords.left);
                    // –∑–∞–ø—Ä–µ—â–∞–µ–º –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å –Ω–∏–∂–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É –ø–æ–ª—è
                    //if (oknoCoords.top + 230 > Result.clientHeight) {
                    //	oknoCoords.top = Result.clientHeight - 230;
                    //}

                    //document.querySelector('#WordModal').style = oknoCoords.top + 'px' + oknoCoords.left + 'px';
                    //document.getElementById("WordModal").style.left = oknoCoords.left + 'px';
                    //document.getElementById("WordModal").style.top = oknoCoords.top + 'px';

                    // Open
                    //currentBtn.addClass('focus');
                    //btn.removeClass('focus');
                    let styl = 'left:' + oknoCoords.left + 'px; top:' + oknoCoords.top + 'px;';
                    document.querySelector('#ModalWindw').style = styl + "display: content; opacity: 1; pointer-events: auto; overflow-y: auto;";
                    //document.querySelector('#WordModal').style = "display: content; opacity: 1; pointer-events: auto; overflow-y: auto;";
                    //
                    //Close on Esc and X
                    //document.addEventListener('keypress', function (e) {
                    //	if (e.keyCode === 27) document.querySelector('#WordModal').style = "";
                    //});

                    //document.querySelector('#close').addEventListener('click', function () {
                    //	document.querySelector('#ModalWindw').style = "opacity: 0; pointer-events: none;";
                    //});
                }
                catch (TypeError) {
                    console.error('–í –ü—É—Å—Ç–æ—Ç–µ, –Ω–∞ —á—Ç–æ –æ–ø–µ—Ä–µ—Ç—å—Å—è?! –ñ–º–∏ –Ω–∞ —Ç–∏–±–µ—Ç—Å–∫–∏–µ —Å–ª–æ–≤–∞!');
                    // expected output: ReferenceError: nonExistentFunction is not defined
                    // Note - error messages will vary depending on browser
                }
            }
        </script>

    </aside>

    <footer class="Down_Sent">
        <div>
            <label for="setup-checkbox" id='Setup' class="setup-button"
                                title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚öõ">‚öôÔ∏è</label>&nbsp;
            <a href='/?ocrData=backUpDB' id='backUpDB' class="picto" title='–í—ã–≥—Ä—É–∑–∏—Ç—å –ë–∞–∑—É –î–∞–Ω–Ω—ã—Ö —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏'>„èà</a>
            &emsp;|&emsp;
            <a href='' id='pg_pre' class="picto" title='–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ù–∞–∑–∞–¥ ‚òö'>‚èÆ</a>&nbsp;
            <a href='/'class="picto" title='–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Ç–µ–∫—Å—Ç–æ–≤ üìö'>üìú</a>&nbsp;
            <a href='' id='pg_nxt' class="picto" title='–°—Ç—Ä–∞–Ω–∏—Ü–∞ –í–ø–µ—Ä–µ–¥ ‚òõ'>‚è≠</a>&emsp;
            <span style='margin-left: 0.5vw;'> –ê–≤—Ç–æ-–ü–µ—Ä–µ–≤–æ–¥ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è [–ø–æ—è–≤–∏—Ç—Å—è ‚áì –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ (–≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Å–ª–æ–≤–∞) –≤—Å–µ—Ö (—Ö–æ—Ç—è-–±—ã –æ–¥–Ω–æ–≥–æ) –∑–Ω–∞—á–µ–Ω–∏–π]:</span>
            
            <div id="Sent_RusTr"></div>
            <hr style="margin:3px">
            <textarea id="Sent_box" style="margin-left:5px" title='–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ (–≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Å–ª–æ–≤–∞) –≤—Å–µ—Ö (—Ö–æ—Ç—è-–±—ã –æ–¥–Ω–æ–≥–æ) –∑–Ω–∞—á–µ–Ω–∏–π —Å–ª–æ–≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, 
            		–∑–¥–µ—Å—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å. 
            		–ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —Ä–µ–¥–∞–∫—Ç—É—Ä—ã –ø–æ–≤–µ—Ä–Ω—É—Ç—å –∫–æ–ª–µ—Å–æ –î—Ö–∞—Ä–º—ã.' class="input_sent" value=""></textarea>
            <a href="#" id="ConcatTxt" title='–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–±–µ—Ç—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–≤–æ–¥ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (IndexedDB & Transl_Bo_Ru.txt) –∏ 
            		–ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å –∫ –ü–µ—Ä–µ–≤–æ–¥—É –¢–µ–∫—Å—Ç–∞ (–≤ –ø—Ä–∞–≤–æ–º –±–æ–∫–æ–≤–æ–º –æ–∫–Ω–µ).' class="picto" style="top:-10px">‚ò∏Ô∏è</a>
            
            <script id="Save Sent Translation" type='text/javascript'>
                ConcatTxt.onclick = function ConcatTxt() {
                    var rus_trs = document.getElementById('Sent_box').value
                    
                    // –ö–æ–Ω–∫–∞—Ç –≤ –ø–æ–ª–µ –ü–µ—Ä–µ–≤–æ–¥ –¢–µ–∫—Å—Ç–∞
                    let Rus_Tr_Txt = document.getElementById('Rus_Txt').value
                    Rus_Tr_Txt = `${Rus_Tr_Txt} ${rus_trs} \n`;

                    document.getElementById('Rus_Txt').value = Rus_Tr_Txt;

                    let tib_snt = document.getElementById(sent_id).innerText

                    //localStorage.setItem(tib_snt, rus_trv);
                    //Add_IndexedDb(tib_snt, rus_trv, 'Sentence')

                    //–≤—ã–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª 03_TR.xml –≤ —Ñ–æ—Ä–º–∞—Ç–µ
                    //–Ω–æ–º–µ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è(id)	—Ç–∏–±–µ—Ç—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ	—Ä—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥
                    var dataBase = 'dLotsawa'  //(—Å–ª–æ–≤–∞—Ä—å Lotsawa)
                    sendHTTP('application/json', '/create/post.esp',
                        '{"sent_id":"' + sent_id + '", "tib_snt":"' + tib_snt + '", "rus_trs":"' + rus_trs + '", "db":"' + dataBase + '", "ocrData":"snt2txt"}',
                        function (text) {
                            console.log(`Export ${rus_trs} --> 03_TR.xml`)
                        }
                    );
                }
            </script>

            <input type="checkbox" id="setup-checkbox" checked/>
            <form class="setup-panel">
                <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h4>
                <hr></br>
                <div>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</br>
                    <input type='radio' name='user' id='Lotsawa' value='Lotsawa' checked>
                    <label class ='lable' for='Lotsawa'>Lotsawa</label></br>
                    <input type='radio' name='user' id='OSBL' value='OSBL'>
                    <label class ='lable' for='OSBL'>OSBL</label>
                </div></br>
                <hr></br>
                <div>–Ø–∑—ã–∫ –ø–µ—Ä–µ–≤–æ–¥–∞ –¢–µ–∫—Å—Ç–∞:</br>
                    <input type='radio' name='Language' id='Ru' value='Ru' checked>
                    <label class='lable' for='Ru'>Ru</label></br>
                    <input type='radio' name='Language' id='En' value='En'>
                    <label class='lable' for='En'>En</label>
                </div></br>
                <hr></br>
                <div>–ú–µ—Ç–æ–¥ –û–±—Ä–∞–±–æ—Ç–∫–∏ –¢–µ–∫—Å—Ç–∞:</br>
                    <input type='radio' name='ocrData' id='Read' value='Read'>
                    <label class='lable' for='Read'>Read</label></br>
                    <input type='radio' name='ocrData' id='Translate' value='TibetanUTFToRus' checked>
                    <label class='lable' for='Translate'>Translate</label>
                </div></br>
                <hr></br>
                <a href="#" id="Submit_Setup" title='–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ù–∞—Å—Ç—Ä–æ–π–∫–∏' class="picto" style="top: 1%;right: .7%;position: absolute;">‚ò∏Ô∏è</a>
                </br>

            <script id='Submit Setup' type='text/javascript'>
                Submit_Setup.onclick = function Submit_Setup() {
                      user= document.querySelector("input[name=user]:checked").value
                      Language = document.querySelector("input[name=Language]:checked").value
                      ocrData = document.querySelector("input[name=ocrData]:checked").value
                      //alert(user, Language, ocrData)
                    sendHTTP('application/json', '/create/post.esp',
                        '{"user":"' + user + '", "Language":"' + Language + '"}',
                        function (text) {
                            console.log(`user : ${user}, Language : ${Language}, ocrData : ${ocrData}`)
                        }
                    );

                }
            </script>
            </form>

            <hr style="margin:3px">
            <div style="margin-left: 77%;">–ø–æ–∂–µ–ª–∞–Ω–∏—è –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞<a href="mailto:emakiri@gmail.com"
                    class="picto" target="_blank">üìß</a></div>
        </div>

    </footer>

</body>

</html>